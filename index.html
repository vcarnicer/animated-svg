<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animated SVG Example</title>
    <style>
        body {
            padding: 0;
            margin: 0;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.1.1/svg.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous">
    </script>
</head>

<body>
    <h1>Animated SVG Example</h1>
    <div class="svg-container">
        <!--Comentada abajo sería la manera normal de cargarlo, sea hardcoded o cargando desde el fichero curve.svg incluido.
            En este elemento se inserta un único elemento <svg> que tiene dentro (agrupa) los distintos <path>-->

            <!--<svg id="curve" width="1440" height="675" viewBox="0 0 1440 675" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path id="svgpath" d="" stroke="#001EFF" stroke-width="3" stroke-linecap="round"/>
            </svg>-->
    </div>
    
    <script>   
        let svg;     
        $(document).ready(function() {            
            svg = SVG().addTo(".svg-container").size(1920, 1080); 
            creaVarios(25, 'hsl(195, 100%, 44%)', 'hsl(79, 100%, 37%)', 0, 0, 3, 1);           
        });

        
        function creaVarios(quantity, initColor, endColor, xStep, yStep, rotStep, scale){
            let _initColor = document.createElement("SPAN");
            _initColor.setAttribute('style', 'stroke: ' + initColor);
            
            let _endColor = document.createElement("SPAN");
            _endColor.setAttribute('style', 'stroke: ' + endColor);

            let initColorRgb = _initColor.style.stroke.split("(")[1].split(")")[0].split(",");
            let initColorHsl = rgbToHsl(initColorRgb[0], initColorRgb[1], initColorRgb[2]);
            initColorHsl[0] *= 360;
            initColorHsl[1] *= 100;
            initColorHsl[2] *= 100;

            let endColorRgb = _endColor.style.stroke.split("(")[1].split(")")[0].split(",");
            let endColorHsl = rgbToHsl(endColorRgb[0], endColorRgb[1], endColorRgb[2]);
            endColorHsl[0] *= 360;
            endColorHsl[1] *= 100;
            endColorHsl[2] *= 100;

            let colorStep = [(endColorHsl[0] - initColorHsl[0]) / quantity, 
                            (endColorHsl[1] - initColorHsl[1]) / quantity,
                            (endColorHsl[2] - initColorHsl[2]) / quantity];
            
            let currentColor = _initColor;
            console.log(currentColor);

            for(let i = 0; i < quantity; i++) {                
                creaUno(i, i*xStep, i*yStep, i*rotStep, scale, currentColor.style.stroke);

                let nextColorRgb = currentColor.style.stroke.split("(")[1].split(")")[0].split(",");
                let nextColorHsl = rgbToHsl(nextColorRgb[0], nextColorRgb[1], nextColorRgb[2]);
                nextColorHsl[0] *= 360;
                nextColorHsl[1] *= 100;
                nextColorHsl[2] *= 100;

                nextColorHsl[0] += colorStep[0];
                nextColorHsl[1] += colorStep[1];
                nextColorHsl[2] += colorStep[2];

                currentColor.setAttribute('style', 'stroke: hsl(' + nextColorHsl[0] + ', ' + nextColorHsl[1] + '%, ' + nextColorHsl[2]  + '%)');
            }
        }
        
        function creaUno(id, translateX, translateY, rotation, scale, color){
            //He preferido hardcodear una vez la curva svg a tener que cargarla del fichero.
            let path = svg.path('M1.99997 773.377C143.51 697.396 287.555 640.247 447.807 623.566C535.813 614.405 629.477 611.585 717.182 625.005C779.037 634.469 835.764 648.614 891.193 677.869C935.125 701.057 975.615 727.515 1018.07 752.926C1061.96 779.195 1114.51 810.634 1166.61 814.675C1255.67 821.58 1347.69 789.862 1416.78 733.62C1547.29 627.387 1661.65 493.899 1818.34 424.152C1896.79 389.232 1966.71 383.753 2049.91 394.116');
            svg.add(path);
            path.fill('none');
            path.stroke({ color: color, width: 15, linecap: 'round', linejoin: 'round' });
            
            path.transform({
                rotate: rotation,
                translateX: translateX,
                translateY: translateY,
                scale: scale 
            })
            
            path.mouseover(
                function(){
                    path.stroke({ color: 'hsl(195, 100%, 44%)', width: 20 });
                }
            );
                
            path.mouseout(
                function(){
                    path.stroke({ color: color, width: 15 });
                }
            );

            return path;
        }

        function rgbToHsl(r, g, b) {
            r /= 255, g /= 255, b /= 255;

            var max = Math.max(r, g, b), min = Math.min(r, g, b);
            var h, s, l = (max + min) / 2;

            if (max == min) {
                h = s = 0; // achromatic
            } else {
                var d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }

                h /= 6;
            }

            return [ h, s, l ];
        }
    </script>
    
</body>

</html>